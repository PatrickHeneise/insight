<%=
calendar({:year => @year, :month => @month}) do |d|
  cell_text = "#{d.mday}<br />" 
  cell_attrs = {:class => 'day'}
  @events.each do |e|
    if e.at_date.mday == d.mday
      cell_text << link_to( e.title, :action => 'show', :id => e ) << "<br />" 
      cell_attrs[:class] = 'specialDay'
    end
  end
  [cell_text, cell_attrs]
end
%>

<h1>Listing events</h1>

<table>
  <tr>
    <th>At date</th>
		<th>At time</th>
    <th>To date</th>
    <th>Room</th>
  </tr>

<% @events.each do |event| %>
  <tr>
    <td><%=h event.at_date %></td>
		<td><%=h event.at_time.to_s(:time) %></td>
    <td><%=h event.to_date %></td>
    <td><%= link_to event.room.name, building_room_path(event.room.building, event.room) %></td>
    <td><%= link_to 'Show', event %></td>
  </tr>
<% end %>
</table>